import{_ as P,D as y,a as k,b as B,c as C,d as q,e as I,f as R,g as _,o as c,h as e,w as n,r as t,i as f,j as S,k as p,l as M,m as x,n as N,u as V,p as F,q as L}from"./index-Dho2qyFN.js";import{D as O,n as T}from"./load-indicator-CCpxoK9O.js";const j={components:{DxForm:R,DxItem:I,DxLabel:q,DxButtonItem:C,DxButtonOptions:B,DxRequiredRule:k,DxCustomRule:y,DxLoadIndicator:O},setup(){const u=L(),r=V(),l=x(""),o=x(!1),d=N({password:""});l.value=r.params.recoveryCode;async function m(){const{password:s}=d;o.value=!0;const a=await F.changePassword(s,l.value);o.value=!1,a.isOk?u.push("/login-form"):T(a.message,"error",2e3)}function i(s){return s.value===d.password}return{loading:o,formData:d,onSubmit:m,confirmPassword:i}}},E={class:"dx-button-text"},z={key:1};function A(u,r,l,o,d,m){const i=t("dx-required-rule"),s=t("dx-label"),a=t("dx-item"),w=t("dx-custom-rule"),b=t("dx-button-options"),h=t("dx-button-item"),g=t("dx-loadIndicator"),v=t("dx-form");return c(),_("form",{onSubmit:r[0]||(r[0]=M((...D)=>o.onSubmit&&o.onSubmit(...D),["prevent"]))},[e(v,{"form-data":o.formData,disabled:o.loading},{changePassword:n(()=>[f("div",null,[f("span",E,[o.loading?(c(),S(g,{key:0,width:"24px",height:"24px",visible:!0})):p("",!0),o.loading?p("",!0):(c(),_("span",z,"Continue"))])])]),default:n(()=>[e(a,{"data-field":"password","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Password",mode:"password"}},{default:n(()=>[e(i,{message:"Password is required"}),e(s,{visible:!1})]),_:1}),e(a,{"data-field":"confirmedPassword","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Confirm Password",mode:"password"}},{default:n(()=>[e(i,{message:"Password is required"}),e(w,{message:"Passwords do not match","validation-callback":o.confirmPassword},null,8,["validation-callback"]),e(s,{visible:!1})]),_:1}),e(h,null,{default:n(()=>[e(b,{width:"100%",type:"default",template:"changePassword","use-submit-behavior":!0})]),_:1})]),_:1},8,["form-data","disabled"])],32)}const J=P(j,[["render",A]]);export{J as default};
