import{_ as D,y as C,c as B,d as q,e as I,f as R,b as E,v as M,g as S,D as T,r as o,h as p,o as c,i as e,j as m,w as a,k as N,l as f,x as V,m as A,n as F,u as L,q as O,p as P,s as j,t as z}from"./index-3Bu-cwWN.js";const G={setup(){const u=F(),s=L(),d=O({email:"",password:""}),t=P(!1);function _(){s.push("/create-account")}async function x(){const{email:i,password:r}=d;t.value=!0;const n=await j.logIn(i,r);n.isOk?s.push(u.query.redirect||"/home"):(t.value=!1,z(n.message,"error",2e3))}return{formData:d,loading:t,onCreateAccountClick:_,onSubmit:x}},components:{DxLoadIndicator:T,DxForm:S,DxEmailRule:M,DxRequiredRule:E,DxItem:R,DxLabel:I,DxButtonItem:q,DxButtonOptions:B,DxButton:C}},H={class:"dx-button-text"},J={key:1},K={class:"link"};function Q(u,s,d,t,_,x){const i=o("dx-required-rule"),r=o("dx-email-rule"),n=o("dx-label"),l=o("dx-item"),b=o("dx-button-options"),g=o("dx-button-item"),h=o("dx-load-indicator"),k=o("dx-form"),w=o("router-link"),v=o("dx-button");return c(),p("form",{class:"login-form",onSubmit:s[0]||(s[0]=A((...y)=>t.onSubmit&&t.onSubmit(...y),["prevent"]))},[e(k,{"form-data":t.formData,disabled:t.loading},{signInTemplate:a(()=>[m("div",null,[m("span",H,[t.loading?(c(),N(h,{key:0,width:"24px",height:"24px",visible:!0})):f("",!0),t.loading?f("",!0):(c(),p("span",J,"Sign In"))])])]),default:a(()=>[e(l,{"data-field":"email","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Email",mode:"email"}},{default:a(()=>[e(i,{message:"Email is required"}),e(r,{message:"Email is invalid"}),e(n,{visible:!1})]),_:1}),e(l,{"data-field":"password","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Password",mode:"password"}},{default:a(()=>[e(i,{message:"Password is required"}),e(n,{visible:!1})]),_:1}),e(l,{"data-field":"rememberMe","editor-type":"dxCheckBox","editor-options":{text:"Remember me",elementAttr:{class:"form-text"}}},{default:a(()=>[e(n,{visible:!1})]),_:1}),e(g,null,{default:a(()=>[e(b,{width:"100%",type:"default",template:"signInTemplate","use-submit-behavior":!0})]),_:1})]),_:1},8,["form-data","disabled"]),m("div",K,[e(w,{to:"/reset-password"},{default:a(()=>s[1]||(s[1]=[V("Forgot password?")])),_:1,__:[1]})]),e(v,{text:"Create an account",stylingMode:"outlined",width:"100%",onClick:t.onCreateAccountClick},null,8,["onClick"])],32)}const W=D(G,[["render",Q]]);export{W as default};
