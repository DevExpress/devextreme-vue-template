import{D,n as C}from"./load-indicator-CCpxoK9O.js";import{_ as B,v as q,b as I,c as R,d as E,e as M,a as S,s as T,f as N,g as p,o as c,h as e,i as m,w as s,r as o,j as V,k as f,t as A,l as F,n as L,m as O,p as P,q as j,u as z}from"./index-Dho2qyFN.js";const G={setup(){const u=z(),a=j(),r=L({email:"",password:""}),t=O(!1);function _(){a.push("/create-account")}async function x(){const{email:i,password:d}=r;t.value=!0;const n=await P.logIn(i,d);n.isOk?a.push(u.query.redirect||"/home"):(t.value=!1,C(n.message,"error",2e3))}return{formData:r,loading:t,onCreateAccountClick:_,onSubmit:x}},components:{DxLoadIndicator:D,DxForm:N,DxEmailRule:T,DxRequiredRule:S,DxItem:M,DxLabel:E,DxButtonItem:R,DxButtonOptions:I,DxButton:q}},H={class:"dx-button-text"},J={key:1},K={class:"link"};function Q(u,a,r,t,_,x){const i=o("dx-required-rule"),d=o("dx-email-rule"),n=o("dx-label"),l=o("dx-item"),b=o("dx-button-options"),g=o("dx-button-item"),h=o("dx-load-indicator"),k=o("dx-form"),w=o("router-link"),v=o("dx-button");return c(),p("form",{class:"login-form",onSubmit:a[0]||(a[0]=F((...y)=>t.onSubmit&&t.onSubmit(...y),["prevent"]))},[e(k,{"form-data":t.formData,disabled:t.loading},{signInTemplate:s(()=>[m("div",null,[m("span",H,[t.loading?(c(),V(h,{key:0,width:"24px",height:"24px",visible:!0})):f("",!0),t.loading?f("",!0):(c(),p("span",J,"Sign In"))])])]),default:s(()=>[e(l,{"data-field":"email","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Email",mode:"email"}},{default:s(()=>[e(i,{message:"Email is required"}),e(d,{message:"Email is invalid"}),e(n,{visible:!1})]),_:1}),e(l,{"data-field":"password","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Password",mode:"password"}},{default:s(()=>[e(i,{message:"Password is required"}),e(n,{visible:!1})]),_:1}),e(l,{"data-field":"rememberMe","editor-type":"dxCheckBox","editor-options":{text:"Remember me",elementAttr:{class:"form-text"}}},{default:s(()=>[e(n,{visible:!1})]),_:1}),e(g,null,{default:s(()=>[e(b,{width:"100%",type:"default",template:"signInTemplate","use-submit-behavior":!0})]),_:1})]),_:1},8,["form-data","disabled"]),m("div",K,[e(w,{to:"/reset-password"},{default:s(()=>[...a[1]||(a[1]=[A("Forgot password?",-1)])]),_:1})]),e(v,{text:"Create an account",stylingMode:"outlined",width:"100%",onClick:t.onCreateAccountClick},null,8,["onClick"])],32)}const X=B(G,[["render",Q]]);export{X as default};
